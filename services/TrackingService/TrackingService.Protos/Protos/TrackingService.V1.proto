syntax = "proto3";

package tracking_service.v1;

import "google/protobuf/timestamp.proto";

service TrackingService {
  rpc GetEventsByHabitIds (GetEventsByHabitIdsRequest) returns (GetEventsByHabitIdsResponse);
  rpc TrackHabit (TrackHabitRequest) returns (TrackHabitResponse);
  rpc DeleteEvent (DeleteEventRequest) returns (DeleteEventResponse);
  rpc GetEventsByIds (GetEventsByIdsRequest) returns (GetEventsByIdsResponse);
}

message GetEventsByHabitIdsRequest {
  repeated int32 habit_ids = 1;
}

message GetEventsByHabitIdsResponse {
  repeated HabitEvent events = 1;
}

message TrackHabitRequest {
  int32 habit_id = 1;
  google.protobuf.Timestamp date = 2;
}

message TrackHabitResponse {
  HabitEvent event = 1;
}

message DeleteEventRequest {
  int32 id = 1;
}

message DeleteEventResponse {
  int32 deleted_rows_count = 1;
}

message HabitEvent {
  int32 id = 1;
  int32 habit_id = 2;
  int32 user_id = 3;
  google.protobuf.Timestamp date = 4;
}

message GetEventsByIdsRequest {
  repeated int32 ids = 1;
}

message GetEventsByIdsResponse {
   repeated HabitEvent events = 1;
}