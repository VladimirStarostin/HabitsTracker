syntax = "proto3";

package tracking_service.v1;

service TrackingService {
  rpc GetEventsByHabitIds (GetEventsByHabitIdsRequest) returns (GetEventsByHabitIdsResponse);
  rpc TrackHabit (TrackHabitRequest) returns (TrackHabitResponse);
  rpc DeleteEvent (DeleteEventRequest) returns (DeleteEventResponse);
  rpc GetEventsByIds (GetEventsByIdsRequest) returns (GetEventsByIdsResponse);
}

message GetEventsByHabitIdsRequest {
  repeated int64 habit_ids = 1;
}

message GetEventsByHabitIdsResponse {
  repeated HabitEvent events = 1;
}

message TrackHabitRequest {
  int64 habit_id = 1;
  string date = 2; //ISO-8601
}

message TrackHabitResponse {
  HabitEvent event = 1;
}

message DeleteEventRequest {
  int64 id = 1;
}

message DeleteEventResponse {
  int32 deleted_rows_count = 1;
}

message HabitEvent {
  int64 id = 1;
  int64 habit_id = 2;
  int64 user_id = 3;
  string date = 4; //ISO-8601
}

message GetEventsByIdsRequest {
  repeated int64 ids = 1;
}

message GetEventsByIdsResponse {
   repeated HabitEvent events = 1;
}